import controlP5.*;

ControlP5 cp5;
SaveButton saveButton;
Eraser eraser;

float strokeWeightValue = 2; 
int selectedColor = color(0); 
int eraserColor = color(255); // Hvid farve for viskelæder

void setup() {
  size(800, 800);
  background(255);

  cp5 = new ControlP5(this);

  cp5.addSlider("strokeWeightSlider")
    .setPosition(750, 750)
    .setSize(20, 50)
    .setRange(1, 10)
    .setValue(strokeWeightValue)
    .setLabel("Stregtykkelse")
    .setSliderMode(Slider.FLEXIBLE);

  saveButton = new SaveButton(width - 80, height - 750, 70, 20, "Gem");
  eraser = new Eraser(100, 780, 70, 20, "Viskelæder");

  cp5.addDropdownList("colorList")
    .setPosition(200, 450)
    .setSize(80, 200)
    .setBarHeight(20)
    .setItemHeight(20)
    .addItems(new String[]{"Blå", "Grøn", "Gul", "Rød", "Sort", "Lyslilla"});
}

void draw() {
  stroke(selectedColor);
  strokeWeight(strokeWeightValue);

  if (mousePressed && !eraser.isMouseOver()) {
    line(pmouseX, pmouseY, mouseX, mouseY);
  }

  saveButton.display();
  // Flyt viskelæderknappen til toppen
  eraser.display();
}

void strokeWeightSlider(float value) {
  strokeWeightValue = value;
  println("Stregtykkelse: " + strokeWeightValue);
}

void colorList(int n) { 
  switch (n) {
    case 0:
      selectedColor = color(0, 0, 255);
      break;
    case 1:
      selectedColor = color(0, 255, 0);
      break;
    case 2:
      selectedColor = color(255, 255, 0);
      break;
    case 3:
      selectedColor = color(255, 0, 0);
      break;
    case 4:
      selectedColor = color(0);
      break;
    case 5:
      selectedColor = color(200, 150, 255);
      break;
    default:
      break;
  }
  println("Valgt farve: " + selectedColor);
}

void mousePressed() {
  if (saveButton.isClicked()) {
    save("tegning.png"); 
    println("Tegning gemt lokalt: tegning.png");
  } else if (eraser.isClicked()) {
    selectedColor = eraserColor; // Skift farven til hvid for viskelæder
    println("Viskelæder aktivt");
  }
}
